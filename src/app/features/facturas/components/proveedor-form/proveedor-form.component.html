<div class="modal-backdrop" (click)="cerrar.emit()"></div>

<div class="modal-container">
  <div class="modal-content-custom small-modal">
    <!-- Header -->
    <div class="modal-header-custom">
      <h3>
        <i class="bi bi-building"></i>
        Nuevo Proveedor
      </h3>
      <button class="btn-close-custom" (click)="cerrar.emit()">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>

    <!-- Body -->
    <div class="modal-body-custom">
      <form [formGroup]="proveedorForm" (ngSubmit)="onSubmit()">
        <div class="row g-3">
          <!-- Nombre -->
          <div class="col-md-12">
            <label class="form-label">
              <i class="bi bi-building"></i>
              Nombre *
            </label>
            <input
              type="text"
              class="form-control"
              formControlName="nombre"
              placeholder="Empresa S.L."
              [class.is-invalid]="isFieldInvalid('nombre')"
            />
            <div class="invalid-feedback" *ngIf="isFieldInvalid('nombre')">
              El nombre es obligatorio (máx. 200 caracteres)
            </div>
          </div>

          <!-- CIF -->
          <div class="col-md-6">
            <label class="form-label">
              <i class="bi bi-card-text"></i>
              CIF *
            </label>
            <input
              type="text"
              class="form-control"
              formControlName="cif"
              placeholder="B12345678"
              [class.is-invalid]="isFieldInvalid('cif')"
            />
            <div class="invalid-feedback" *ngIf="isFieldInvalid('cif')">
              El CIF es obligatorio (máx. 20 caracteres)
            </div>
          </div>

          <!-- Teléfono -->
          <div class="col-md-6">
            <label class="form-label">
              <i class="bi bi-telephone"></i>
              Teléfono *
            </label>
            <input
              type="tel"
              class="form-control"
              formControlName="telefono"
              placeholder="666123456"
              [class.is-invalid]="isFieldInvalid('telefono')"
            />
            <div class="invalid-feedback" *ngIf="isFieldInvalid('telefono')">
              El teléfono es obligatorio (máx. 20 caracteres)
            </div>
          </div>

          <!-- Email -->
          <div class="col-md-12">
            <label class="form-label">
              <i class="bi bi-envelope"></i>
              Email *
            </label>
            <input
              type="email"
              class="form-control"
              formControlName="email"
              placeholder="proveedor@ejemplo.com"
              [class.is-invalid]="isFieldInvalid('email')"
            />
            <div class="invalid-feedback" *ngIf="isFieldInvalid('email')">
              Email inválido o vacío (máx. 100 caracteres)
            </div>
          </div>

          <!-- Dirección -->
          <div class="col-md-12">
            <label class="form-label">
              <i class="bi bi-geo-alt"></i>
              Dirección *
            </label>
            <input
              type="text"
              class="form-control"
              formControlName="direccion"
              placeholder="Calle Example, 123, 28001 Madrid"
              [class.is-invalid]="isFieldInvalid('direccion')"
            />
            <div class="invalid-feedback" *ngIf="isFieldInvalid('direccion')">
              La dirección es obligatoria (máx. 500 caracteres)
            </div>
          </div>
        </div>

        <!-- Footer -->
        <div class="modal-footer-custom">
          <button type="button" class="btn btn-secondary" (click)="cerrar.emit()">
            <i class="bi bi-x-circle"></i>
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="loading">
            <span *ngIf="!loading">
              <i class="bi bi-plus-circle"></i>
              Crear Proveedor
            </span>
            <span *ngIf="loading">
              <span class="spinner-border spinner-border-sm me-2"></span>
              Guardando...
            </span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>